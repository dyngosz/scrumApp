extends layout

link(rel='stylesheet', href='/stylesheets/style.css')
block content
   each individualProject in project
      div.navbar.navbar-inverse.navbar-fixed-top(role='navigation')
         div.container
            button.navbar-toggle(type='button', data-toggle='collapse', data-target='.navbar-collapse')
            a.navbar-brand(href="/profile")
               | SCRUM App
            div.nav.navbar-nav.navbar-right 
               li
                     a(href='/sprintcreator?id='+individualProject.projectid)="Add Sprint"
               li
                  a(href="/profile")= "Back"      
         div.collapse.navbar-collapse
      
      div(align='center', ng-app='ng-app')
            h1 #{individualProject.projectname}
            div(align='left', class='sprints' id='sprints')
               each sprint in sprints
                  div.row(align='center', class='jumbotron')
                     // Header table
                     table
                        thead
                           tr
                              th.col-md-4(align='left') #{sprint.sprintname}  
                              th.col-md-6
                              th.col-md-1(align='right') Start date
                              th.col-md-1(align='right') End date
                              
                        tbody
                           tr
                              td 
                              td
                              td #{sprint.sprintstartdate}
                              td #{sprint.sprintenddate}
                     // End of Header table
                     table
                        thead
                           tr
                              th.col-md-12
                                 a.btn.btn-info(href='/taskcreator?id='+sprint.sprintid+'&pid='+individualProject.projectid, role='button') 
                                    span.glyphicon.glyphicon-plus(aria-hidden='true')
                                    |  Add task
                              th.col-md-12
                              
                        tbody
                           tr
                              td 
                              td
                     br
                     .container
                        table.table.table-hover(class="sortable")

                          thead
                            tr
                              th Task name
                              th Task description
                              th Points
                              th
                              th
                          tbody
                           each task in tasks
                             if (sprint.sprintid === task.sprintid)
                               tr
                                 td #{task.taskname}
                                 td #{task.taskdescription}
                                 td #{task.taskpoints}
                                 td
                                    a.btn.btn-warning.btn-sm(href='/taskeditor?pid='+individualProject.projectid+'&sid='+sprint.sprintid+'&tid='+task.taskid, role='button') 
                                       span.glyphicon.glyphicon-pencil(aria-hidden='true')
                                       |  Edit
                                 td
                                    a.btn.btn-danger.btn-sm(onclick='deleteTask(' + task.taskid + ',' + individualProject.projectid + ')')
                                       span.glyphicon.glyphicon-remove(aria-hidden='true')
                                    
                              
                  div.row.col-md-12
                     br 
                     br 
                     br
                     
   script(type='text/javascript').
      function deleteTask(task, project){
            if(confirm("Are you sure you want to delete task?")){
                $.post('deletetask', { taskid: task, projectid: project },function(data) {
                        alert(data);
                });
                location.reload();
            }
            else{
            }
        }
